<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Cache List</title>
    </head>
    <style>
        body {
            margin: 30px;
            background-color: #adadad;
        }
        .TEXT {
            font-size: 32px;
        }
        .IMG {
            height: 600px;
        }
    </style>
    <body>
        <h1>Dev Tools - Cache List</h1>
        <button style="display: inline-block;" id="rl">Reload</button>
        <hr>
        <div id="container"></div>
        <script>
            fetch("/cache/list", { method: 'GET' }).then((data) => {
                data.json().then((data) => {
                    let c = document.getElementById("container")
                    for (let i in data) {
                        if (data[i]["content-type"].split("/")[0] == "image") {
                            let f = document.createElement("div")
                            let p = document.createElement("div")
                            let img = document.createElement("img")
                            p.innerText = i
                            p.classList.add("TEXT")
                            img.src = "http://127.0.0.1:8000/cache/request?url=" + i
                            img.classList.add("IMG")
                            f.appendChild(p)
                            f.appendChild(img)
                            c.appendChild(f)
                            c.appendChild(document.createElement("hr"))
                        }
                    }
                })
            });
            document.getElementById("rl").onclick = () => {
                location.reload()
            }
        </script>
    </body>
</html>